# <a name="header"></a><a name="content"></a><a name="x6bd221d2f32ddbc2ba2657824352cb9f5ed76a3"></a>Guia de Migração do Gradio 4.40 para 5.49

Este guia descreve **todas as mudanças importantes** entre o Gradio 4.40 e o Gradio 5.49, e indica ajustes necessários no código para aproveitar os novos recursos e remover _gambiarras_ de JS. Seguindo estas orientações, sua interface funcionará perfeitamente no front-end (que interage com o backend normalmente) e estará otimizada para as melhorias do Gradio 5.

## <a name="x6d7a1a4ca4d299e567c0f5dc69dd8e0f71d455c"></a>Novidades e Melhorias Principais no Gradio 5.x

- **Desempenho (SSR Opcional):** O Gradio 5 introduz **Server-Side Rendering (SSR)** para carregar apps muito mais rápido, eliminando o “spinner” de loading inicial[\[1\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,crisper%20and%20more%20modern%20look). Em ambientes como HuggingFace Spaces, o SSR melhora velocidade e SEO. Localmente, você pode habilitar SSR instalando Node.js 20+ e passando ssr_mode=True ao lançar a demo (ou definindo a variável de ambiente GRADIO_SSR_MODE="true"); caso contrário, o Gradio faz renderização client-side normalmente[\[2\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Gradio%205%20includes%20the%20capability,true). _(Obs: SSR é opcional; sem Node, o Gradio 5 funciona em modo tradicional.)_
- **Visual Modernizado:** Muitos componentes foram redesenhados para uma aparência mais moderna no Gradio 5 (botões, abas, sliders, JSON, etc.), com bordas, fontes e cores de modo escuro ajustadas para um visual mais limpo[\[3\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,crisper%20and%20more%20modern%20look). Isso significa que sua UI terá um **tema diferente por padrão**. Qualquer CSS personalizado que dependia de seletores do Gradio 4 pode precisar de ajustes (veja seção de CSS abaixo).
- **Streaming de Mídia:** Agora o Gradio **suporta streaming nativo** de áudio, imagens e vídeo, tanto em inputs quanto outputs. Foi adotado o protocolo HLS (HTTP Live Streaming) para melhorar a UX de streaming de áudio/vídeo[\[4\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,this%20guide%20for%20input%20streaming). Desenvolvedores têm controle sobre a frequência de streaming e fila de usuários via novos parâmetros específicos[\[4\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,this%20guide%20for%20input%20streaming). _Exemplo:_ é possível enviar geração de áudio frame a frame ou atualizar imagens progressivamente usando yield no Python e componentes de mídia do Gradio 5, dispensando hacks manuais para atualização parcial.
- **Segurança Reforçada:** Por ser pensado para produção, o Gradio 5 passou por melhorias de segurança (houve auditoria externa)[\[5\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=streaming.%20,more%20details%20coming%20soon). Várias mudanças de segurança afetam diretamente o código (detalhadas adiante, como restrição de paths de arquivos, CORS, etc.), então é importante conferi-las na migração.
- **Playground de IA (Experimental):** O Gradio 5 inclui um playground assistido por IA que gera apps Gradio a partir de um prompt de linguagem natural[\[6\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=more%20details%20coming%20soon%21%20,libraries%20that%20are%20unsupported%20by). _Não afeta diretamente sua migração_, mas vale saber que existe (pode ajudar a prototipar interfaces rapidamente).
- **Multipáginas e Sidebar:** Versões 5.x introduziram suporte a **apps multipáginas** com navegação nativa (barra de navegação ou menu lateral)[\[7\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310569%20bd4895a%20,Thanks%20%40aliabid94)[\[8\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310622%20b505df0%20,Thanks%20%40dawoodkhan82). Se o seu aplicativo crescer e precisar separar telas (ex.: aba de configs separada da aba principal), agora é possível fazê-lo de forma estruturada usando gr.TabbedInterface ou definindo páginas no Blocks com gr.Tab ou via novas APIs de multipage (você pode criar um gr.Blocks() para cada página e usar links de navegação). Isso elimina a necessidade de manter muitas abas hackeadas em um só layout. _(Para um app de UI única com várias abas como o Stable Diffusion WebUI, você pode continuar usando abas normalmente, mas saiba que o Gradio 5 oferece essa alternativa multipage se for útil.)_
- **Componentes e Recursos Adicionais:** Ao longo das versões 5.x foram adicionados vários recursos úteis, por exemplo:
- **Componente Timer:** para agendar eventos periódicos de forma reativa (substitui o parâmetro every removido dos eventos – veja “Breaking Changes”)[\[9\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,longer%20supported%20in%20event%20listeners)[\[10\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=with%20gr,click%28lambda%20x%3Ax%2C%20a%2C%20b%2C%20every%3D1).
- **Barra de progresso e alertas nativos:** agora você pode usar gr.Progress(track_tqdm=True) para integrar com loops _tqdm_ ou usar funções utilitárias gr.Warning, gr.Error, gr.Success, gr.Info dentro de funções Python para mostrar mensagens ao usuário sem precisar de JS customizado[\[11\]](https://www.gradio.app/guides/alerts#:~:text=Display%20alerts%20to%20the%20user,display%20an%20error%20message)[\[12\]](https://stackoverflow.com/questions/77192757/gradio-pop-up-display-on-success#:~:text=Gradio%20pop%20up%20display%20on,inform%20the%20user%20by%20something). Por exemplo, raise gr.Error("Mensagem de erro") interrompe a função e exibe uma mensagem de erro na interface[\[11\]](https://www.gradio.app/guides/alerts#:~:text=Display%20alerts%20to%20the%20user,display%20an%20error%20message).
- **Temas personalizáveis:** além do tema padrão reformulado, o Gradio 5 traz vários temas prontos em gr.themes (e possibilidade de criar temas customizados facilmente). Você pode aplicar theme=gr.themes.Default() ou Soft()/Monochrome() etc., e até extender temas (veja seção de CSS mais abaixo).
- **Outros:** suporte a PWA (instalar app em celular), melhorias no gr.Dataframe (filtros, busca, congelar colunas[\[13\]](https://www.gradio.app/changelog#:~:text=Features)[\[14\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310554%20b8ff5d6%20,Prevent%20scrolling%20when)), novos componentes de mídia (ex.: gr.Video agora suporta streaming, gr.Audio com visualização wave nativa, etc.), integração facilitada com modelos HuggingFace (ex.: gr.load() ajusta automaticamente interface de _chat_ para modelos conversacionais[\[15\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20The%20,are%20loaded%20from%20Hugging%20Face)), entre outros.

**Nota:** Segundo os desenvolvedores do Gradio, se seu app **não exibia avisos de depreciação no Gradio 4.x**, ele provavelmente rodará em Gradio 5 com poucas modificações[\[16\]](https://huggingface.co/blog/gradio-5#:~:text=Gradio%20apps%20that%20did%20not,changes%20in%20Gradio%205%20here). Entretanto, no seu caso queremos **não apenas “fazer rodar”, mas modernizar o código** para usar os novos recursos nativos em vez de hacks. Portanto, é fundamental verificar as mudanças incompatíveis e refatorar onde necessário, conforme descrito a seguir.

## <a name="x86eea38b3b1a46bdb3da5af7cd6eee963ccb2dc"></a>Principais _Breaking Changes_: diferenças do 4.40 para 5.x

A seguir listamos **todas as alterações de comportamento e API** que ocorreram do Gradio 4.40 até a série 5.x e que podem exigir mudanças no código:

- **Python 3.10+ obrigatório:** O Gradio 5 exige **Python 3.10 ou superior[\[17\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Installation)**. Certifique-se de usar uma versão compatível antes de atualizar a biblioteca.
- **gr.Audio:** Não converte mais automaticamente para WAV. No Gradio 4, o parâmetro format default era "wav", então mesmo que o usuário enviasse um MP3, o componente convertia para WAV antes de passar à função Python. **Agora**, format=None por padrão – ou seja, mantém o arquivo no formato original[\[18\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1,automatically). **O que ajustar:** se seu código assumia sempre WAV, talvez adicione format="wav" explicitamente ao gr.Audio para manter o comportamento antigo, ou adapte a lógica para lidar com outros formatos de áudio de entrada.
- **gr.Code:** Não aceita mais tupla como entrada. Antes, você podia passar uma tupla (filepath, ...) para um componente gr.Code e o Gradio abria o arquivo e exibia seu conteúdo. **Agora isso foi removido por segurança** – o gr.Code só exibirá _strings_ de código que você fornecer. [\[19\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2,is%20not%20supported)[\[20\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Previously%2C%20passing%20a%20tuple%20to,g). **O que ajustar:** se seu app usava gr.Code esperando carregar conteúdo de arquivo, será preciso você mesmo ler o arquivo no Python (ex.: open().read()) e retornar a string, ao invés de confiar que o componente abra automaticamente[\[19\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2,is%20not%20supported).
- **gr.FileExplorer:** Parâmetro root **removido** (já estava deprecado). Em vez dele, use root_dir para definir o diretório raiz mostrado[\[21\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%20,has%20been%20removed). **O que ajustar:** substituir root=... por root_dir=... nas declarações de gr.FileExplorer, se houver.
- **gr.LoginButton/gr.LogoutButton:**
- O parâmetro signed_in_value do LoginButton foi removido (já havia sido substituído por logout_value no v4)[\[22\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20,has%20been%20removed).
- O componente gr.LogoutButton foi **removido** – agora o próprio LoginButton **se transforma em botão de logout** quando o usuário faz login[\[22\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20,has%20been%20removed).\
  **O que ajustar:** se seu app utiliza autenticação (login do HF, etc), remova usos de LogoutButton (não existe mais) e ajuste LoginButton para usar apenas os parâmetros vigentes (logout_value etc.). Provavelmente seu app Stable Diffusion WebUI não usa esses recursos de login, então pode ignorar esta mudança.
- **gr.Image:** SVG como input não é mais aceito (exceto se type="filepath"). SVGs não podem ser convertidos em numpy ou PIL facilmente, então antes eles podiam quebrar o app. Agora, se o usuário tentar enviar um SVG num gr.Image comum, o Gradio lança erro – a não ser que você declare o componente com type="filepath" (nesse caso você recebe o path e pode você mesmo tratar o SVG)[\[23\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=6,type%3Dfilepath). **O que ajustar:** se por algum motivo seu app aceitava imagens SVG (pouco provável no SD WebUI), ou mude o componente para type="filepath" ou converta o SVG antes. Caso contrário, não há impacto (usuários enviando PNG/JPG continuam funcionando).
- **gr.DataFrame:**
- O parâmetro height foi renomeado para max_height, refletindo melhor que é altura máxima antes de surgir scroll. **Ajuste:** renomear height=... para max_height=... se você definiu altura de DataFrames.
- O evento .change agora dispara também quando os **headers** mudam[\[24\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=8.%20The%20,triggered%20when%20header%20values%20change). No Gradio 4, só disparava ao mudar células; agora cabeçalhos contam como parte do valor do dataframe. **Ajuste:** provavelmente nenhum necessário, mas fique ciente caso use .change em DataFrame – ele pode ser acionado em mais casos do que antes.
- **gr.Chatbot:** (caso tenha chat integrado no app)
- Removido o parâmetro likeable. Antes havia um argumento interno para exibir botões de “like” em mensagens; agora isso foi simplificado: o chatbot **só mostrará botões de curtir se você definir explicitamente um evento .like()** – então o parâmetro não é mais necessário[\[25\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=9.%20The%20,event%20is%20defined).
- Por padrão, **mensagens do usuário não têm botão de like** (só as do bot). Antes, ambos tinham, o que poluía a UI; agora só as respostas do bot são “curtíveis” por padrão[\[26\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=10,able%20in%20the%20%60gr.Chatbot). Se quiser permitir like nas mensagens do usuário, há um novo param user_like_button=True no evento .like() que reativa isso[\[26\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=10,able%20in%20the%20%60gr.Chatbot).\
  **O que ajustar:** se você não usa chatbots, ignore. Se usa (ex.: algum assistente codex no UI?), remova likeable=True/False do construtor do Chatbot e apenas defina eventos de like conforme necessário.
- **gr.ChatInterface:** (interface de chat de alto nível)
- Parâmetro examples_per_page **removido**. Exemplos agora são exibidos dentro da janela de chat, então não há mais paginação separada[\[27\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=). Ajuste: remova esse argumento se usava ChatInterface.
- **Undo/Retry/Clear removidos:** Os parâmetros undo_btn, retry_btn, clear_btn do ChatInterface foram **removidos[\[28\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,arguments%20have%20changed)**. Aqueles botões “Desfazer última mensagem”, “Tentar de novo” e “Limpar histórico” sumiram da UI – em vez disso, o novo design incorporou _Undo/Retry/Clear_ diretamente no componente gr.Chatbot (eles aparecem contextualmente nas mensagens)[\[29\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=The%20ChatInterface%20UI%20has%20been,component.%20See%20below).
- **submit_btn e stop_btn mudaram:** Agora esses argumentos não aceitam mais instâncias de gr.Button, e sim **bool ou string**. Se você passar False, o botão correspondente não aparece; se passar uma string, ela será o texto do botão (os botões de Enviar ou Parar padrão)[\[30\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Additionally%2C%20the%20accepted%20type%20for,displayed%20in%20the%20corresponding%20button). Antes, no ChatInterface do v4, você podia passar um botão personalizado; no v5, ou você deixa o padrão (e pode ocultar passando False) ou define o texto dele.\
  **O que ajustar:** remover do código qualquer referência a undo_btn, retry_btn, clear_btn no ChatInterface (não existem mais). Se quiser ocultar os botões de enviar/parar, use submit_btn=False/stop_btn=False. Se quiser customizar o texto deles, passe strings. Caso contrário, pode omitir que virão padrões. _(Novamente, isso só se aplica se você estiver usando gr.ChatInterface – provavelmente não é o caso no SD WebUI padrão.)_
- **gr.Dropdown:** O valor inicial padrão agora é a **primeira opção da lista** (antes era vazio/None). No Gradio 4, um gr.Dropdown(choices=[...]) sem valor selecionado exibia um campo vazio; isso podia levar a None sendo passado à função, causando erros se não tratado. Para evitar confusão, o Gradio 5 escolhe automaticamente a primeira opção como selecionada por default[\[31\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=12,list). **O que ajustar:** se em algum dropdown você esperava que ficasse vazio até o usuário escolher algo, agora não ficará. Para replicar o comportamento antigo (nenhuma seleção inicial), defina explicitamente value=None usando um lambda: por exemplo gr.Dropdown([...], value=lambda: None)[\[32\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=original%20behavior%2C%20set%20the%20value,component%20like%20this). Verifique também funções Python que recebiam None de dropdowns – elas possivelmente nunca mais receberão None, já que sempre haverá um valor. Ajuste a lógica se necessário (ou use o truque do lambda: None acima para forçar ausência de seleção).
- **gr.Row:** O parâmetro equal_height agora _default_ é False[\[33\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=). Ou seja, componentes colocados lado a lado num gr.Row **não serão mais esticados para a mesma altura automaticamente**. No Gradio 4, o padrão era True, então, por exemplo, se você tinha uma coluna com uma caixa de texto longa e outra com uma curta, ambas ficavam da altura da mais alta. No Gradio 5, cada coluna só ocupa a altura necessária. **O que ajustar:** se você preferir o estilo antigo com alturas uniformes, passe gr.Row(equal_height=True) explicitamente ao criar linhas[\[34\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=13,False). Caso contrário, aproveite a mudança se ela não prejudicar o layout.
- **Mudanças Gerais em Input/Output:**
- **Restrição de file_type:** Para componentes de upload de arquivos (gr.File, gr.Gallery, gr.UploadButton, gr.MultimodalTextbox), o parâmetro file_type agora é **enforced no backend[\[35\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,now%20enforced%20in%20the%20backend)**. Antes, mesmo se você restringisse tipos no front-end, ainda era possível burlar e enviar tipo não permitido via API/cliente, e o backend recebia assim mesmo. Agora o backend checa e rejeita arquivos de tipo inválido. **O que ajustar:** provavelmente nada, mas esteja ciente de possíveis exceções no backend se alguém tentar enviar extensões não listadas. Defina adequadamente file_type (e file_count etc.) para inputs de arquivo.
- **info aceita Markdown/HTML:** O parâmetro informativo info em vários componentes agora renderiza **Markdown/HTML** em vez de só texto plano[\[36\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,accepts%20Markdown%2FHTML). Isso permite incluir links, ênfase etc. facilmente nas descrições. **O que ajustar:** se você usava info="texto" simples, continuará ok. Agora, se quiser, pode melhorar essas descrições com formatação Markdown (por exemplo, info="\*\*Importante:\*\* escolha uma imagem."). Não há contras aqui, é só um novo recurso.
- **Submit com Enter exige campo não-vazio:** Pressionar _Enter_ em um gr.Textbox vazio não dispara mais o evento de submit[\[37\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3,if%20they%20are%20empty) (o mesmo vale para gr.MultimodalTextbox sem texto e sem arquivo). Antes, podia enviar um valor None/vazio. Agora o Gradio previne submits “acidentais” sem conteúdo. **O que ajustar:** normalmente nada – isso evita chamadas desnecessárias ao backend. Mas se por acaso você tinha lógica dependente desse submit vazio, saiba que ele não ocorrerá mais.
- **Mudanças de Segurança:**
- **Arquivos fora do diretório corrente são bloqueados:** A partir do Gradio 5, **só arquivos no diretório de trabalho atual (ou subpastas) ou no tmp podem ser retornados por funções[\[38\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1,returned%20from%20your%20prediction%20function)**. No Gradio 4, você podia retornar _qualquer_ arquivo (ex.: um path absoluto em outra pasta) que o Gradio copiava para a interface. Isso agora é proibido por segurança. **Exemplo:** antes você podia fazer return "/img/out.png" de um diretório global /img; agora isso causará erro – você deve salvar e retornar algo como ./alguma_pasta/out.png dentro do dir do app[\[39\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=As%20an%20example%2C%20let%E2%80%99s%20say,directory%20would%20work). **O que ajustar:** verifique onde você salva/retorna arquivos (imagens geradas, etc.). _No caso do Stable Diffusion WebUI_, normalmente as imagens geradas são salvas em outputs/... dentro do folder do projeto, então deve estar ok. Contudo, **garanta que o path retornado esteja dentro da pasta do webui**. Se seu código move arquivos para fora antes de retornar, mude para mantê-los dentro (ou leia o arquivo e retorne o conteúdo binário via gr.File se necessário). O Gradio 5 emitirá um erro claro se você tentar retornar arquivo fora – então teste e ajuste os paths de saída conforme precisar[\[40\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=def%20text_to_image,image%2Fgenerations%2Fimage.png%27%29%20return%20path).
- **CORS mais restrito (origem null rejeitada):** Gradio agora rejeita requisições com origem null por padrão (antes permitia). Isso afeta somente cenários em que você embeda o app via webcomponent e testa rodando o arquivo HTML localmente (file://). Nesse caso, a origem vem null e será bloqueada[\[41\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2,origin%20by%20default). **O que ajustar:** provavelmente nada para uso normal. Se precisar, pode lançar com strict_cors=False para relaxar (ou servir o HTML numa origem correta).
- **Arquivos servidos baixam em vez de abrir:** Com exceção de tipos básicos (áudio, imagem, vídeo, JSON, texto), todos os demais arquivos que o Gradio servir via link agora serão **forçados a download** em vez de tentar abrir no navegador[\[42\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3,browser). Isso é para mitigar XSS. **O que ajustar:** não muito – apenas note que, por exemplo, se sua interface disponibiliza um PDF ou CSV para o usuário clicar, em vez de abrir no browser possivelmente ele fará download direto. É um comportamento mais seguro.
- **Proíbe URLs de arquivos locais:** Por segurança contra SSRF, o Gradio agora não permite que um componente receba URL que aponte para localhost/arquivo local. Por ex., se você passar uma URL do tipo http://127.0.0.1:7860/file=alguma\_coisa, o Gradio lançará erro[\[43\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4,that%20resolve%20to%20local%20files). **O que ajustar:** isto só importa se, em alguma parte do front-end, você gerava URLs acessando recursos locais via file=. A solução é não fazer isso – use caminhos relativos ou sirva o arquivo de outra maneira. No geral, essa mudança não costuma afetar apps normais, a não ser cenários muito específicos.
- **Outras mudanças diversas:**
- **allow_flagging renomeado para flagging_mode:** no gr.Interface (e variável de ambiente GRADIO_ALLOW_FLAGGING virou GRADIO_FLAGGING_MODE)[\[44\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,flagging_mode). Ajuste nomes se você desativava flagging passando allow_flagging="never" etc.
- **additional_inputs_accordion_name removido do ChatInterface:** se usado, agora deve-se passar um objeto gr.Accordion customizado via additional_inputs_accordion=... para personalizar inputs adicionais[\[45\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%20,gr.ChatInterface).
- **Parâmetro thumbnail removido do Interface:** (já não fazia nada no v4)[\[46\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20,gr.Interface).
- **css, js e head não aceitam mais _file paths_:** Antigamente, você podia passar tanto uma string de código CSS/JS quanto um caminho de arquivo nesses parâmetros. Isso gerava ambiguidades e comportamentos imprevisíveis. **Agora, se você passar uma string, o Gradio sempre interpretará como código**, não mais como path[\[47\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20,no%20longer%20accept%20filepaths). E se quiser incluir um arquivo externo, use os novos parâmetros dedicados css_paths=[...] ou head_paths=[...]. **O que ajustar:** verifique se você passou caminhos de arquivo nesses campos. Ex: Blocks(css="style.css") não vai mais carregar o arquivo e aplicar; ele vai literalmente tentar usar a string style.css como CSS. A solução é trocar para Blocks(css_paths=["style.css"]) ou ler o conteúdo do arquivo e passar como string em css="..." manualmente[\[47\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20,no%20longer%20accept%20filepaths).
- **Parâmetro every removido dos eventos:** No Gradio 4, você podia agendar um evento repetitivo passando every=x no .click()/.change() etc. Isso foi removido no 5 (era uma solução limitada)[\[9\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,longer%20supported%20in%20event%20listeners)[\[10\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=with%20gr,click%28lambda%20x%3Ax%2C%20a%2C%20b%2C%20every%3D1). Agora a forma de fazer algo em intervalos regulares é usando o componente **gr.Timer()**. Você cria t = gr.Timer(interval_s, \*\*active\*\*=False) e depois usa t.tick(fn, inputs, outputs) para definir o que deve rodar a cada tick. Pode ativar/desativar o timer chamando eventos que setam gr.Timer(..., active=True/False) conforme mostrado no exemplo[\[48\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=btn%20%3D%20gr.Button%28,Timer%28active%3DTrue%29%2C%20None%2C%20t)[\[49\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=...%20stop_btn%20%3D%20gr.Button%28,1s). **O que ajustar:** se seu app usava every=, reescreva usando Timer. _Exemplo migrando:_ antes: btn.click(func, inputs, outputs, every=1); agora: crie timer = gr.Timer(1, active=False); timer.tick(func, inputs, outputs); btn.click(lambda: gr.Timer(active=True), None, timer) para iniciar, e opcionalmente um outro botão para parar btn_stop.click(lambda: gr.Timer(active=False), None, timer)[\[48\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=btn%20%3D%20gr.Button%28,Timer%28active%3DTrue%29%2C%20None%2C%20t)[\[49\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=...%20stop_btn%20%3D%20gr.Button%28,1s).
- **concurrency_count removido de .queue():** (já não tinha efeito no 4)[\[50\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,queue).
- **Método utilitário gr.make_waveform removido:** Ele gerava uma imagem de waveform a partir de um áudio. Foi retirado porque agora o componente Audio tem waveform embutido se desejado. Se precisar ainda, o código fonte está disponível no repo[\[51\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%C2%A0,removed%20from%20the%20library). Provavelmente irrelevante pro seu caso.
- **Cache de exemplos mudou:** Antes, para cachear lazy os exemplos, passava-se cache_examples="lazy". Agora existe um param separado cache_mode="lazy" (e cache_examples=True/False virou só ligar/desligar caching)[\[52\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20argument%20for%20lazy,examples%20has%20been%20changed)[\[53\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Now%2C%20the%20code%20above%20your,code%20should%20look%20like%20this). Se você usava cache_examples="lazy", troque para cache_examples=True, cache_mode="lazy".
- **Rotas da API prefixadas:** As rotas internas do Gradio (usadas para arquivos estáticos, etc.) agora são prefixadas com \*/gradio_api/\*. Isso é importante se seu código ou algum HTML custom fazia referência direta a caminhos como /file=xyz. Agora deve usar /gradio_api/file=xyz[\[54\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=8,route). **O que ajustar:** procure em seu código por strings "/file=" ou outras rotas do Gradio e adicione o prefixo /gradio_api/ conforme necessário para que continuem funcionando.
- **Temas – variáveis renomeadas:** Se você personalizou tema via classes Python, note que variáveis iniciando com button_shadow foram trocadas por button_primary_shadow e button_secondary_shadow[\[55\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=7,have%20each%20been%20replaced). Substitua nomes antigos pelos novos para manter estilo personalizado de botões.
- **CSS/JS custom de v4 pode quebrar no v5:** Em geral, **CSS e JS customizados não têm compatibilidade garantida entre versões[\[56\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=demo.launch%28allowed_paths%3D%5B)**. Alterações na estrutura DOM, nomes de classes ou comportamento podem invalidar seletores e scripts. O que nos leva à próxima seção – como eliminar _gambiarras_ e usar soluções nativas do Gradio 5.

## <a name="x09f363c958d86c0f21e4a26d992a70a826a92bc"></a>Ajustes Recomendados no Código (eliminando _gambiarras_)

Para aproveitar ao máximo o Gradio 5 e **simplificar seu front-end**, recomendamos refatorar as soluções improvisadas em favor dos novos recursos nativos. Aqui estão as principais diretrizes:

### <a name="xe7808dc8ce4d499820b2d3ac8576e176f559be0"></a>1. Substitua scripts JS embutidos por eventos nativos

No Gradio 4 era comum inserir <script> manualmente (via gr.HTML ou modificações no DOM) para manipular a interface ou reagir a eventos. No Gradio 5 isso não é mais necessário – há **três maneiras suportadas de adicionar JavaScript customizado** em uma demo[\[57\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=There%20are%203%20ways%20to,code%20to%20your%20Gradio%20demo):

- **Blocks(js=...) para código ao carregar:** Você pode passar um _string_ com código JS no parâmetro js ao criar o gr.Blocks. Esse código será executado **assim que a interface for carregada[\[57\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=There%20are%203%20ways%20to,code%20to%20your%20Gradio%20demo)**. Use isso para inicializar comportamentos globais, adicionar elementos customizados ou configurar handlers de teclado, etc., logo no início. _(Exemplo: apresentar uma animação de boas-vindas quando a demo abre)_.
- **Funções JS em eventos (js=...):** Agora, _todo listener de evento_ (.click, .change, etc.) aceita um argumento js onde você pode fornecer uma função JavaScript (em forma de string ou até referência, se definida via Blocks(js=...)). Essa função JS **executa no navegador** quando o evento ocorre. Você pode usar **somente JS** (com fn=None no Python) para eventos puramente no front-end, ou **combinar JS + Python** no mesmo evento – caso em que o JS roda primeiro, e o retorno dele é passado como entrada para a função Python subsequente[\[58\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=2.%20When%20using%20,look%20at%20the%20code%20below)[\[59\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=btn.click%28sentence_maker%2C%20,x%20%2B%20%27%20foo).
- _Exemplo 1:_ Suponha que antes você tinha um botão que, ao clicar, rodava um script JS para inverter a ordem de três campos de texto. No Gradio 5, basta:

  btn.click(None, [campoA, campoB, campoC], resultado, \
  `          `js="(a,b,c) => `${c} ${b} ${a}`")

  Isso faz o front-end pegar os valores a, b, c, inverter a ordem e retornar a string. Como fn=None, nenhum código Python é chamado – o output resultado é atualizado diretamente com o retorno do JS[\[59\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=btn.click%28sentence_maker%2C%20,x%20%2B%20%27%20foo). Tudo isso sem escrever <script> manual ou manipular DOM.

- _Exemplo 2:_ Você quer que ao clicar num botão, primeiro seja adicionada uma palavra no campo de texto e **depois** seja enviada ao backend. Você pode passar ambos:

  botao.click(func_py, entrada, saida, \
  `            `js="x => x + ' palavraExtra'")

  Aqui o JS recebe o valor x do campo, acrescenta ' palavraExtra' e retorna. Em seguida, esse resultado é enviado para a função Python func_py. Ou seja, o JS preprocessa a entrada antes do backend ser chamado (JS roda **antes** do Python)[\[59\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=btn.click%28sentence_maker%2C%20,x%20%2B%20%27%20foo). Isso permite mover pequenas lógicas para o front-end, reduzindo carga do servidor e necessidade de múltiplos callbacks.

**Resumindo:** use o atributo js dos eventos sempre que precisar manipular valores ou interface do lado do cliente. Isso cobre casos que antes exigiam adicionar listeners manualmente via JavaScript.

- **Blocks(head=...) para inserir código no <head>:** Se precisar incluir bibliotecas externas ou meta tags (por exemplo, um script do Google Analytics, atalhos de teclado globais, fontes custom, etc.), use o parâmetro head. Você pode passar um string com tags HTML (como <script>...</script> ou <link rel="stylesheet" ...>) que o Gradio injetará no <head> da página[\[60\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=3,to%20your%20demo%20like%20so)[\[61\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=%3C%2Fscript%3E%20). _Exemplo:_

  gr.Blocks(head="""<script src='https://www.googletagmanager.com/gtag/js?id=UA-XXX'></script>\
  <script> ... gtag config ... </script>""")

  Dessa forma você inclui scripts externos de forma suportada. Isso é útil também para definir favicons ou meta tags de compartilhamento.

**Dica:** Com essas opções, você consegue eliminar praticamente todas as _gambiarras_ de JS soltas no código. **Não é mais preciso usar gr.HTML("<script>...</script>")** para adicionar comportamento. Ao migrar, procure onde seu código insere scripts e mova-os para um desses mecanismos oficiais. Além disso, o Gradio 5 garante que scripts adicionados assim serão preservados mesmo usando SSR (no modo SSR, o HTML inicial vem estático, mas o JS do head e Blocks(js=...) é incluído adequadamente). Isso torna sua solução mais robusta do que depender de manipulações diretas no DOM pós-carregamento.

### <a name="x0ba4883e126cb81cd95b1f033607acdfc759e0e"></a>2. Use componentes nativos em vez de soluções personalizadas

O Gradio evoluiu muito entre a v4.40 e a v5.49, **incorporando nativamente funcionalidades que antes só eram possíveis via gambiarras**. Ao migrar, busque substituir implementações caseiras pelo componente ou parâmetro oficial equivalente:

- **Desenho e máscara em imagens:** Se você tinha um canvas custom para desenhar (por exemplo, máscara de inpainting ou scribbles sobre imagem), o Gradio 5 oferece componentes prontos:
- Use gr.Sketchpad() para um **quadro de desenho P&B** (bitmap 255x255 por padrão)[\[62\]](https://www.gradio.app/changelog#:~:text=%2A%20A%20standalone%20black).
- Use gr.Paint() para um **quadro de desenho colorido[\[63\]](https://www.gradio.app/changelog#:~:text=match%20at%20L9693%20,standalone%20color%20sketch)**.
- Qualquer gr.Image agora pode ter a ferramenta de desenho ativada: defina tool="sketch" para permitir rabisco em preto e branco, ou tool="color-sketch" para rabisco colorido sobre a imagem. O componente entregará tanto a imagem original quanto uma máscara desenhada pelo usuário para sua função Python[\[64\]](https://www.gradio.app/changelog#:~:text=match%20at%20L10104%20adding%20%60tool%3D,mask%20to%20your%20prediction%20function). _(Isso é perfeito para inpainting: o usuário desenha a máscara sobre a imagem, e sua função recebe ambas – a imagem base e o mask – sem precisar de HTML/JS custom para capturar o canvas.)_\
  **O que ajustar:** Remover implementações de canvas manual (por exemplo, scripts JavaScript que capturam eventos de mouse e geram máscara). Em vez disso, troque para gr.Image(tool="sketch") para máscaras simples ou use gr.Sketchpad()/gr.Paint() conforme o caso. Essas ferramentas internas já suportam vários recursos (ex: botão _Clear_, escolher cor do pincel, etc., dependendo do modo) e funcionam bem com o sistema de fila do Gradio.
- **Atualização dinâmica de visibilidade/estado:** No Gradio 4, para mostrar/ocultar componentes dinamicamente ou habilitar/desabilitar algo, às vezes se recorria a JS direto alterando CSS ou atributos. No Gradio 5, continue usando o padrão _callback_ Python devolvendo objetos de atualização (gr.update(...)). Isso não mudou e continua sendo a forma suportada. Exemplo: se antes você usava JS para esconder um campo com document.getElementById('id').style.display = 'none', agora prefira ligar o evento a uma função Python que retorna gr.update(visible=False) para aquele componente (você pode retornar múltiplos updates de uma vez). A vantagem é manter a lógica no Python e deixar o Gradio cuidar de aplicar no front-end, funcionando inclusive com SSR. _Obs:_ Gradio 5 tem ajustes no sistema de visibilidade, mas nada que exija mudança a não ser o caso do Row.equal_height citado antes.
- **Atalhos de teclado:** Se você adicionou scripts para capturar teclas (ex.: pressionar "S" para apertar um botão “Submit”), considere usar uma combinação de Blocks(js=...) e eventos JS para isso. No seu script global (via head ou Blocks(js)), você pode adicionar um event listener de teclado que chame o método .click() de um botão Gradio específico. Por exemplo, suponha que você tenha:

  btn = gr.Button("Submit", elem_id="submit_btn")

  Você pode injetar no head:

  <script>\
  `  `document.addEventListener('keydown', function(e) {\
  `    `if(e.shiftKey && e.key === 'S') {\
  `      `const btn = document.querySelector('#submit\_btn button');\
  `      `if(btn) btn.click();\
  `    `}\
  `  `});\
  </script>

  Isso verifica se Shift+S foi pressionado e programa um clique no botão interno do Gradio[\[65\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=demo). Essa abordagem mantém o JS necessário, mas de forma contida e suportada (e.g. usando um elem_id atribuído ao componente para encontrá-lo). _Infelizmente, ainda não há uma API declarativa nativa para atalhos no Gradio 5, então essa pequena injeção é aceitável._ Apenas lembre-se de testar em diferentes navegadores para garantir que não conflita com outros atalhos[\[66\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=Note%20that%20injecting%20custom%20JS,component).

- **Timer/periódicos:** Conforme mencionado, se você tinha algo como um loop JS para consultar o backend periodicamente (ex.: checar status de job), use o gr.Timer do Gradio 5 para isso. Ele permite disparar uma função Python em intervalos fixos facilmente, sem gambiarras.
- **Download de arquivos:** Se no seu front-end havia código para criar artificialmente links de download ou abrir resultados em nova janela, veja se pode simplificar: o Gradio 5, quando retorna um arquivo (ex.: componente gr.File ou uma imagem), já fornece um botão/link de download. E com a mudança de segurança, ele vai forçar download de certos tipos conforme vimos. Portanto, você talvez não precise mais de código JS para, por exemplo, converter um blob e forçar download. Deixe o comportamento padrão agir.
- **Integração com outras libs JS:** Caso seu app integrasse libs JS por conta própria (ex.: um viewer 3D, gráficos custom etc), considere criar um **Componente Customizado** do Gradio para isso. Gradio 5 introduziu um _workflow_ para componentes personalizados escritos em **TypeScript** (usando Svelte internamente)[\[67\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=Custom%20Components). Basicamente, você pode rodar gradio client create <nome> para gerar um template, implementar a lógica front-end em TS/Svelte e o backend Python correspondente, e então usar esse componente no seu app. Isso encapsula melhor funcionalidades complexas do que inserir JS cru. No seu caso, talvez não seja necessário criar um componente do zero, mas é bom saber que essa opção existe se alguma parte do UI for muito específica. Por exemplo, se você tivesse um widget de galeria com funções além do que gr.Gallery oferece, poderia implementar via custom component. Consulte o **Guia de Custom Components** para um passo a passo caso siga por esse caminho.

### <a name="xee4b724ef80617c59c889349abbfaac76d8dc7b"></a>3. Centralize estilos em temas ou CSS suportado

Remova CSS “solto” inserido manualmente e aproveite as formas oficiais de customização de aparência:

- **Parâmetro css:** O Blocks aceita CSS custom diretamente. Você pode passar um string com regras CSS no argumento css, ou fornecer um caminho de arquivo CSS via css_paths=[...][\[68\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=For%20additional%20styling%20ability%2C%20you,kwarg). O CSS fornecido assim será carregado e aplicado de forma consistente. _Exemplo:_

  with gr.Blocks(css=".gradio-container {background-color: #222;}") as demo:\
   ...

  Isso mudaria o fundo da área principal para cinza escuro. Se as regras forem extensas, coloque-as em style.css e faça Blocks(css_paths=["style.css"]). (Lembre-se: conforme mencionado, no Gradio 5 os parâmetros css/js não aceitam nome de arquivo diretamente sem usar css_paths/js_paths[\[47\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20,no%20longer%20accept%20filepaths).)

- **Temas nativos:** Considere usar ou estender os temas incluídos. Por exemplo, gr.Blocks(theme=gr.themes.Monochrome()) dá um visual diferente do padrão. Você pode criar um tema custom importando gr.themes.Base e ajustando variáveis (cores primárias, fonte, etc.). O **Guia de Temas** no docs do Gradio mostra como ajustar cada aspecto. Isso é preferível a sobrescrever CSS manualmente, pois mantém compatibilidade melhor nas versões futuras. Por exemplo, se antes você fazia mudanças de cor via CSS, agora pode simplesmente criar um tema custom e passar para Blocks.
- **Evite depender de seletores internos instáveis:** Se precisar adicionar CSS manual, use de preferência classes altas ou IDs que o Gradio documenta (como .gradio-container). O próprio Gradio alerta que usar seletores muito específicos do DOM interno pode quebrar em updates[\[69\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=using%20the%20,kwarg). Ou seja, **mantenha seu CSS genérico e focado em elementos de alto nível**. Exemplo: para estilizar todos os botões, você pode usar .gr-button (classe aplicável aos <button> do Gradio), em vez de algo como selecionar pelo texto ou posição.
- **Atualize seletores se necessário:** Se seu CSS custom referenciava classes do Gradio 4, revise na nova interface se elas ainda existem. Com a reformulação visual, nomes de classe podem ter mudado. Inspecione a página no DevTools após migrar para Gradio 5 e ajuste os seletores no seu CSS custom conforme preciso.
- **Componentes com CSS interno:** Note que alguns componentes agora têm diferenças – p.ex. o gr.Slider e o gr.Radio ganharam estilos novos. Se você estilizada esses componentes manualmente, valide se ainda é necessário ou se o novo padrão já atende.

Em resumo, concentre a personalização visual usando **theme e CSS do Blocks**, ao invés de inserir <style> manual no meio do HTML. Isso vai “chutar para fora” as gambiarras de estilo e tornará seu código mais sustentável.

### <a name="teste-completo-após-a-migração"></a>4. Teste completo após a migração

Depois de aplicar as mudanças acima, faça um **teste completo de uso da interface**: - Verifique se todos os callbacks Python ainda estão funcionando (observe o console do Gradio para ver se algum erro de parâmetro ocorre, por exemplo, devido a mudança de nome de argumento). - Abra o devtools do navegador e veja se aparece algum erro de JavaScript – idealmente nenhum, mas se seu JS custom não foi totalmente substituído, confira se não está quebrado. - Teste fluxos como: múltiplos usuários em fila (o sistema de fila não mudou exceto pelo concurrency_count removido, então deve funcionar igual), geração de imagens, download de resultados, etc. - Se possível, habilite o SSR (rodando com Node instalado e demo.launch(ssr_mode=True)) e veja se a interface carrega bem e se os recursos (como seus CSS/JS custom) aplicam corretamente. SSR pode revelar se você inseriu scripts de forma não suportada (porque talvez não executem). Com as dicas dadas (usar Blocks(js) e head), tudo deve rodar tanto em SSR quanto em modo normal.

Por fim, aproveite as melhorias: o app deve carregar mais rápido, com interface renovada e código mais limpo. Ao migrar para Gradio 5.49, você removeu muitos workarounds e passou a usar recursos nativos **suportados**, o que facilitará futuras atualizações. Boa migração e bons experimentos com a nova versão!

**Referências Utilizadas:** Gradio Release Notes e Documentação oficial[\[70\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,as%20input%20and%20output%20are)[\[38\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1,returned%20from%20your%20prediction%20function)[\[57\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=There%20are%203%20ways%20to,code%20to%20your%20Gradio%20demo)[\[64\]](https://www.gradio.app/changelog#:~:text=match%20at%20L10104%20adding%20%60tool%3D,mask%20to%20your%20prediction%20function), entre outras. Cada citação em formato 【†】 aponta para a fonte original dessas informações, caso precise de mais detalhes. Boa parte das mudanças listadas vêm do _changelog_ “Migrating to Gradio 5”[\[71\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=)[\[31\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=12,list), complementado com dicas práticas de uso da nova API.

---

<a name="citations"></a>[\[1\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,crisper%20and%20more%20modern%20look) [\[2\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Gradio%205%20includes%20the%20capability,true) [\[3\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,crisper%20and%20more%20modern%20look) [\[4\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,this%20guide%20for%20input%20streaming) [\[5\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=streaming.%20,more%20details%20coming%20soon) [\[6\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=more%20details%20coming%20soon%21%20,libraries%20that%20are%20unsupported%20by) [\[9\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,longer%20supported%20in%20event%20listeners) [\[10\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=with%20gr,click%28lambda%20x%3Ax%2C%20a%2C%20b%2C%20every%3D1) [\[15\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20The%20,are%20loaded%20from%20Hugging%20Face) [\[17\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Installation) [\[18\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1,automatically) [\[19\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2,is%20not%20supported) [\[20\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Previously%2C%20passing%20a%20tuple%20to,g) [\[21\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%20,has%20been%20removed) [\[22\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20,has%20been%20removed) [\[23\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=6,type%3Dfilepath) [\[24\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=8.%20The%20,triggered%20when%20header%20values%20change) [\[25\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=9.%20The%20,event%20is%20defined) [\[26\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=10,able%20in%20the%20%60gr.Chatbot) [\[27\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=) [\[28\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,arguments%20have%20changed) [\[29\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=The%20ChatInterface%20UI%20has%20been,component.%20See%20below) [\[30\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Additionally%2C%20the%20accepted%20type%20for,displayed%20in%20the%20corresponding%20button) [\[31\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=12,list) [\[32\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=original%20behavior%2C%20set%20the%20value,component%20like%20this) [\[33\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=) [\[34\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=13,False) [\[35\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1.%20The%20,now%20enforced%20in%20the%20backend) [\[36\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,accepts%20Markdown%2FHTML) [\[37\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3,if%20they%20are%20empty) [\[38\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=1,returned%20from%20your%20prediction%20function) [\[39\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=As%20an%20example%2C%20let%E2%80%99s%20say,directory%20would%20work) [\[40\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=def%20text_to_image,image%2Fgenerations%2Fimage.png%27%29%20return%20path) [\[41\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2,origin%20by%20default) [\[42\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3,browser) [\[43\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4,that%20resolve%20to%20local%20files) [\[44\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,flagging_mode) [\[45\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%20,gr.ChatInterface) [\[46\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20,gr.Interface) [\[47\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=5.%20,no%20longer%20accept%20filepaths) [\[48\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=btn%20%3D%20gr.Button%28,Timer%28active%3DTrue%29%2C%20None%2C%20t) [\[49\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=...%20stop_btn%20%3D%20gr.Button%28,1s) [\[50\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=2.%20The%20,queue) [\[51\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=3.%20The%C2%A0,removed%20from%20the%20library) [\[52\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=4.%20The%20argument%20for%20lazy,examples%20has%20been%20changed) [\[53\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=Now%2C%20the%20code%20above%20your,code%20should%20look%20like%20this) [\[54\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=8,route) [\[55\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=7,have%20each%20been%20replaced) [\[56\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=demo.launch%28allowed_paths%3D%5B) [\[70\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=,as%20input%20and%20output%20are) [\[71\]](https://github.com/gradio-app/gradio/issues/9463#:~:text=) Migrating to Gradio 5 · Issue #9463 · gradio-app/gradio · GitHub

<https://github.com/gradio-app/gradio/issues/9463>

[\[7\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310569%20bd4895a%20,Thanks%20%40aliabid94) [\[8\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310622%20b505df0%20,Thanks%20%40dawoodkhan82) [\[13\]](https://www.gradio.app/changelog#:~:text=Features) [\[14\]](https://www.gradio.app/changelog#:~:text=%2A%20%2310554%20b8ff5d6%20,Prevent%20scrolling%20when) [\[62\]](https://www.gradio.app/changelog#:~:text=%2A%20A%20standalone%20black) [\[63\]](https://www.gradio.app/changelog#:~:text=match%20at%20L9693%20,standalone%20color%20sketch) [\[64\]](https://www.gradio.app/changelog#:~:text=match%20at%20L10104%20adding%20%60tool%3D,mask%20to%20your%20prediction%20function) Gradio Changelog

<https://www.gradio.app/changelog>

[\[11\]](https://www.gradio.app/guides/alerts#:~:text=Display%20alerts%20to%20the%20user,display%20an%20error%20message) Alerts - Gradio

<https://www.gradio.app/guides/alerts>

[\[12\]](https://stackoverflow.com/questions/77192757/gradio-pop-up-display-on-success#:~:text=Gradio%20pop%20up%20display%20on,inform%20the%20user%20by%20something) Gradio pop up display on success - Stack Overflow

<https://stackoverflow.com/questions/77192757/gradio-pop-up-display-on-success>

[\[16\]](https://huggingface.co/blog/gradio-5#:~:text=Gradio%20apps%20that%20did%20not,changes%20in%20Gradio%205%20here) Welcome, Gradio 5

<https://huggingface.co/blog/gradio-5>

[\[57\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=There%20are%203%20ways%20to,code%20to%20your%20Gradio%20demo) [\[58\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=2.%20When%20using%20,look%20at%20the%20code%20below) [\[59\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=btn.click%28sentence_maker%2C%20,x%20%2B%20%27%20foo) [\[60\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=3,to%20your%20demo%20like%20so) [\[61\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=%3C%2Fscript%3E%20) [\[65\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=demo) [\[66\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=Note%20that%20injecting%20custom%20JS,component) [\[67\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=Custom%20Components) [\[68\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=For%20additional%20styling%20ability%2C%20you,kwarg) [\[69\]](https://www.gradio.app/guides/custom-CSS-and-JS#:~:text=using%20the%20,kwarg) Custom CSS And JS

<https://www.gradio.app/guides/custom-CSS-and-JS>

## Operação (nesta fork)

- SSR (Server-Side Rendering): habilitado por padrão.
  - Desligar: `GRADIO_SSR_MODE=0`.
  - Ligar/forçar: `GRADIO_SSR_MODE=1|true|yes|on`.
- Injeção de JS via head (allow/deny list por ENV):
  - `GRADIO_JS_ALLOWLIST`
    - Não setado: injeta todos os `.js/.mjs` sob `javascript/` (comportamento legado).
    - `auto`/`true`/`on`/`1`/``: allowlist curada (exclui `token-counters.js` e `settings.js`).
    - Outra string: lista de basenames separados por vírgula.
  - `GRADIO_JS_DENYLIST`: basenames sempre excluídos (aplicado junto com a allowlist).
- Extra Networks: filtro/ordem no servidor (fase 1)
  - Cada aba possui `Filter…`, `Sort field`, `Sort dir`.
  - Renderização no servidor evita reordenar/filtrar via DOM.
  - Próxima fase: migrar para `gr.Dataset`/`gr.Gallery` nativos.
