About Gradio 5: will try to upgrade to Gradio 5 at about 2025 March. If failed, then will try again on about 2025 June. relatively positive that we can have Gradio5 before next summer.

2025 Oct 12: Added `npm run typecheck` (strict TypeScript on all first-party JS via `tsconfig.json`) so legacy scripts now fail fast when type assumptions break; converted `inputAccordion.ts` to JSDoc-typed JS so shipping assets no longer require a build step (the `build:ts` script remains for compatibility but is now optional).
2025 Oct 12: Hardened core frontend scripts (`ui.js`, `progressbar.js`, `resizeHandle.js`, `localization.js`, `notification.js`, `imageviewer*.js`, etc.) with JSDoc types, safer DOM helpers, and wake-lock guards. The Gradio UI now runs under `npm run typecheck` without legacy implicit-any issues in those modules.
2025 Oct 12: Final pass on remaining strict-type errors in `token-counters.js`, `textualInversion.js`, and `ui.js` (minor). Added safe `getAppElementById` lookups, explicit rest-parameter typings, and clearer callback signatures. No behavior changes — just loud, early failure on typing mistakes.
2025 Oct 12: Docs: Added `codex/frontend-public-api.md` (global JS surfaces and contracts) and filled DevNotes headers for `extensions.js`, `textualInversion.js`, and `localStorage.js`.
2025 Oct 13: Frontend payload hardening: normalize outgoing request data (script.js) so numeric strings are coerced into numbers for all Gradio calls (predict/queue). This prevents Slider/Number preprocess `TypeError: '<' not supported between instances of 'str' and 'int'` even when events bypass JS wrappers.
2025 Oct 12: Restored mandatory frontend helpers (`settings.js`, `ui.js`) in the default injection path and fail fast when GRADIO_JS_* filters remove them, fixing the broken settings layout, empty inference dropdowns, and Gradio queue crashes.
2025 Oct 11: Removed client-side `compat_gradio5.js` wrapper that suppressed UI callback errors. Errors will now surface in console for proper fixes; no behavior changes intended beyond eliminating silent failures.
2025 Oct 11: Improved callback robustness in `script.js` — invalid (non-function) registrations are ignored with a warning and callback errors are logged with context, reducing confusing messages like "error running callback :" and aiding root-cause fixes.
2025 Oct 11: Begin Gradio 5 migration per "Guia de Migração do Gradio 4.40 para 5" — set expected Gradio to 5.49.1 and use `concurrency_limit` in `.queue()`.
2025 Oct 11: JS → Python: img2img copy buttons now switch tabs via server updates (no DOM clicks). Added optional SSR gating with `GRADIO_SSR_MODE` (off by default).
2025 Oct 11: Switched asset injection to Gradio 5-friendly Blocks(head=...) (no more TemplateResponse monkeypatch). Kept existing reload button behavior; `reload_javascript()` remains a no-op.
2025 Oct 12: Default SSR enabled (can disable with GRADIO_SSR_MODE=0). Added env-driven JS allowlist (GRADIO_JS_ALLOWLIST). When allowlist is active (''/auto/true), token-counters.js and settings.js are not injected by default.
2025 Oct 12: Default JS denylist enabled (can override with GRADIO_JS_DENYLIST). By default, removes token-counters.js, settings.js, gradio.js and inputAccordion.js (replaced by Python pathways).
2025 Oct 12: Backend loader honors strict offline flag `--disable-online-tokenizer`. If config/tokenizer assets are missing under backend/huggingface/<repo>/, loader fails fast with explicit instructions (no online fallback).
2025 Oct 12: SSR default OFF. To enable SSR, set `GRADIO_SSR_MODE=1` (requires Node >= 20 and may increase startup time). This avoids port scans and manifest/queue errors when Node is absent.
2025 Oct 12: Extra Networks (Checkpoints) – added optional native Gallery (enable with GRADIO_EXTRA_NETWORKS_DATASET=1). Server-side filter/sort retained; selection applies checkpoint immediately.
2025 Oct 12: Extra Networks (Textual Inversion) – optional native Gallery under same flag; selector to choose Positive/Negative prompt target; selecting a card appends the token to the chosen prompt.
2025 Oct 12: Extra Networks (LoRA) – optional native Gallery under same flag; selector Positive/Negative; selecting a card inserts `<lora:alias_or_name:weight>` in the chosen prompt, weight defaults to preferred weight or `extra_networks_default_multiplier`.
2025 Oct 12: Extra Networks (Hypernetworks) – optional native Gallery under same flag; selector Positive/Negative; selecting a card inserts `<hypernet:name:weight>` using `extra_networks_default_multiplier`.
2025 Oct 11: Primeira geração mais rápida (lado cliente). A injeção via Blocks(head=...) e a opção de SSR reduzem o overhead inicial de UI, mitigando aquele “delay” chato na 1ª geração após abrir a página. Observação: o aquecimento de backend (carregar pesos/compilar kernels) ainda pode impactar a 1ª execução.

2025 Oct 13: Slider/Dropdown error context. `modules/ui_gradio_extensions.py` now augments Gradio exceptions with the component `label`, `elem_id`, bounds (`min`, `max`, `step`), and the offending `payload`/`coerced` values. Removed the silent substitution of `'none'/'null'` with the component default for sliders — invalid inputs fail fast with a clear message. No behavior change for valid payloads.
2025 Oct 16: Startup/extension sliders: treat truly missing inputs (payload is `None`, including `'none'/'null'` sentinels) as "not provided" and use the component’s declared default (`value`). This addresses crashes like `TypeError: '<' not supported between instances of 'NoneType' and 'float'` on load/startup events when untouched controls (e.g., Dynamic Thresholding → Mimic Scale) haven't emitted values yet. Still fails fast for invalid, out‑of‑bounds, or malformed payloads.
2025 Oct 16: Add guards for Radio/Checkbox preprocess. Radios now accept integer indices (0..n-1) and boolean payloads (mapped to indices for 2‑option radios) and substitute the component default when the payload is missing; invalid indexes or unknown values raise clear errors with label/elem_id/choices context. Checkboxes now parse common string/number forms and fall back to default when missing.
2025 Oct 16: Named extension params (phase 1). Assigned stable `elem_id`s to Dynamic Thresholding controls and added client builders to include them in the strict JSON only when the extension is enabled. Server reconstructs `script_args` from this JSON (by `elem_id`) and ignores positional script args, so unused params are no longer sent. Maintains selectable script support via `__script_index` in the JSON; non-selected scripts are untouched.
2025 Oct 17: Preset radio (SD/XL/Flux/All) is now explicitly interactive and persists to `opts.forge_preset` on change. Fixes unclickable quicksetting radio and ensures changes are saved.
2025 Oct 17: Backward‑compat submit fallback. If a generate event still sends the legacy positional payload instead of the new strict JSON, the server now falls back to the legacy txt2img/img2img APIs. When strict JSON is present, the new path is used. The frontend fetch wrapper also injects strict JSON into the last data slot as a safety net.
2025 Oct 17: Number preprocess guard. Numeric inputs now coerce strings like "28" or "0.5" and treat missing values as "not provided" (use the component default). Errors now include label/elem_id/precision. Fixes crashes like "type str doesn't define __round__" on Number components.
2025 Oct 17: Seed sentinels. Number guard interprets 'Automatic'/'auto'/'random' for seed/subseed fields as -1 (randomize), matching UI semantics. Prevents seed Number crashes when frontend sends a textual sentinel.
2025 Oct 13: Strict submit payloads (phase 1). Generate actions now send a compact strict JSON with only active/visible controls; the server builds arguments strictly from that set and ignores inactive groups (e.g., Hires when disabled, inpaint-only fields when not on inpaint tabs). For txt2img the function inputs are now just `[id_task, payload_json]` plus extension script inputs; for img2img, images/masks and batch file inputs remain positional, scalars move to the strict JSON. The hidden field was renamed from `*_named_override` to `*_named_active`.
2025 Oct 13: Code hygiene: replaced local one-letter variable `p` with `proc` in txt2img/img2img server paths for clarity. External script/plugin APIs that use `p` remain unchanged for compatibility.

2024 Oct 28: A new branch `sd35` is contributed by [#2183](https://github.com/lllyasviel/stable-diffusion-webui-forge/pull/2183) . I will take a look at quants and sampling and transformer's clip-g vs that clip-g rewrite before merging to main ... (Oct 29: okay maybe medium also need to take a look later)

About Flux ControlNet (sync [here](https://github.com/lllyasviel/stable-diffusion-webui-forge/discussions/932)): The rewrite of ControlNet Intergrated will ~start at about Sep 29~ (delayed) ~start at about Oct 15~  (delayed) ~start at about Oct 30~ (delayed) start at about Nov 20. (When this note is announced, the main targets include some diffusers formatted Flux ControlNets and some community implementation of Union ControlNets. However, this may be extended if stronger models come out after this note.)

2024 Sep 7: New sampler `Flux Realistic` is available now! Recommended scheduler is "simple".
