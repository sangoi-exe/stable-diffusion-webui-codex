Sprint 005 – 2025-10-12
=======================

Context
- Goal: Impor TypeScript estrito (checkJs) em praticamente todo o JS do frontend sem quebrar UX.
- Estratégia: JSDoc + guards + helpers compartilhados; preservar hooks _js do Gradio.

Entregas
- Núcleo tipado: ui.js, progressbar.js, resizeHandle.js, imageviewer(+gamepad).js, imageMaskFix.js, localization.js, notification.js, profilerVisualization.js, inputAccordion.js, generationParams.js, edit-attention.js, edit-order.js, hints.js, ui_settings_hints.js.
- Helpers padronizados: getAppElementById, submitWithProgress, normalizeSubmitArgs, updateInput.
- Tooling: tsconfig.json (allowJs/noEmit), tsconfig.build.json (build opcional), script npm `typecheck`.
- Documentação: NEWS.md e codex/frontend-js-type-safety.md.

Validação
- `npm run typecheck` executado repetidamente. Erros remanescentes concentram-se em scripts menores (e.g., token-counters.js) e pequenos trechos de settings.js/resizeHandle.js (tratados na sequência do próximo sprint).
- Testes manuais: lightbox (mouse/teclado/gamepad), progresso (wake-lock), tooltips, resize de colunas, notificações com som.

Riscos / Próximos passos
- Finalizar `settings.js`/`token-counters.js` tipagem completa; revisar `textualInversion.js` quando o backend emite IDs diferentes.
- Criar mini-smoke test para wakeLock indisponível.

